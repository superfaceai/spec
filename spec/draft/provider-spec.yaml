$schema: http://json-schema.org/draft-07/schema
type: object
properties:
  name:
    type: string
    pattern: "^[_A-Za-z][_\\-0-9A-Za-z]*$"
  services:
    type: array
    items:
      $ref: "#/definitions/Service"
    minItems: 1
  securitySchemes:
    type: array
    items:
      $ref: "#/definitions/SecurityScheme"
  defaultService:
    description: ServiceIdentifier must correspond to existing Service `id` from services.
    $ref: "#/definitions/ServiceIdentifier"
required:
- name
- services
- defaultService
definitions:
  Service:
    type: object
    properties:
      id:
        $ref: "#/definitions/ServiceIdentifier"
      baseUrl:
        type: string
        examples:
        - https://swapi.dev/api
    required:
    - id
    - baseUrl
  ServiceIdentifier:
    $ref: "#/definitions/Identifier"
  Identifier:
    type: string
    regex: "[_A-Za-z][_0-9A-Za-z]*"
    examples:
    - swapidev
  SecurityScheme:
    oneOf:
    - $ref: "#/definitions/ApiKeyHeaderSecurity"
    - $ref: "#/definitions/ApiKeyQueryParamSecurity"
    - $ref: "#/definitions/BasicAuthSecurity"
    - $ref: "#/definitions/BearerTokenSecurity"
  SecurityIdentifier:
    $ref: "#/definitions/Identifier"
  ApiKeyHeaderSecurity:
    type: object
    properties:
      id:
        $ref: "#/definitions/Identifier"
      type:
        type: string
        enum:
        - apiKey
      in:
        type: string
        enum:
        - header
      name:
        type: string
        description: Name of header
        examples:
        - X-API-Key
    required:
    - id
    - type
    - in
    - name
  ApiKeyQueryParamSecurity:
    type: object
    properties:
      id:
        $ref: "#/definitions/SecurityIdentifier"
      type:
        type: string
        enum:
        - apiKey
      in:
        type: string
        enum:
        - query
      name:
        type: string
        description: Name of query parameter
    required:
    - id
    - type
    - in
    - name
  BasicAuthSecurity:
    type: object
    properties:
      id:
        $ref: "#/definitions/SecurityIdentifier"
      type:
        type: string
        enum:
        - http
      scheme:
        type: string
        enum:
        - basic
    required:
    - id
    - type
    - scheme
  BearerTokenSecurity:
    type: object
    properties:
      id:
        $ref: "#/definitions/SecurityIdentifier"
      type:
        type: string
        enum:
        - http
      scheme:
        type: string
        enum:
        - bearer
      bearerFormat:
        description: |
          A hint to the client to identify how the bearer token is formatted.
          Bearer tokens are usually generated by an authorization server, so this
          information is primarily for documentation purposes.
        type: string
        examples:
        - JWT
    required:
    - id
    - type
    - scheme

{
	"kind": "MapDocument",
	"map": {
		"kind": "Map",
		"profileId": {
			"kind": "ProfileId",
			"profileId": "http://superface.ai/profile/conversation/SendMessage"
		},
		"provider": {
			"kind": "Provider",
			"providerId": "http://superface.ai/directory/Tyntec#SMS"
		}
	},
	"definitions": [
		{
			"kind": "MapDefinition",
			"mapName": "SendMessage",
			"usecaseName": "SendMessage",
			"variableExpressionsDefinition": [],
			"stepsDefinition": [
				{
					"kind": "StepDefinition",
					"stepName": "",
					"condition": {
						"kind": "JSExpression",
						"expression": "true"
					},
					"variableExpressionsDefinition": [],
					"run": {
						"kind": "NetworkOperationDefinition",
						"definition": {
							"kind": "HTTPOperationDefinition",
							"method": "POST",
							"url": "https://api.tyntec.com/chat-api/v2/messages",
							"variableExpressionsDefinition": [],
							"requestDefinition": {
								"contentType": "application/json",
								"security": "other",
								"headers": [
									{
										"kind": "MapExpressionsDefinition",
										"left": "ApiKey",
										"right": {
											"kind": "JSExpression",
											"expression": "input.auth.apikey.key"
										}
									}
								],
								"body": [
									{
										"kind": "MapExpressionsDefinition",
										"left": "to",
										"right": {
											"kind": "JSExpression",
											"expression": "input.to"
										}
									},
									{
										"kind": "MapExpressionsDefinition",
										"left": "channels",
										"right": {
											"kind": "JSExpression",
											"expression": "['sms']"
										}
									},
									{
										"kind": "MapExpressionsDefinition",
										"left": "sms.from",
										"right": {
											"kind": "JSExpression",
											"expression": "input.from"
										}
									},
									{
										"kind": "MapExpressionsDefinition",
										"left": "sms.contentType",
										"right": {
											"kind": "JSExpression",
											"expression": "'text'"
										}
									},
									{
										"kind": "MapExpressionsDefinition",
										"left": "sms.text",
										"right": {
											"kind": "JSExpression",
											"expression": "input.text"
										}
									}
								],
								"queryParametersDefinition": []
							},
							"responseDefinition": {
								"statusCode": 200,
								"contentType": "application/json",
								"contentLanguage": "en-US",
								"outcomeDefinition": {
									"kind": "OutcomeDefinition",
									"resultDefinition": [
										{
											"kind": "MapExpressionsDefinition",
											"left": "messageId",
											"right": {
												"kind": "JSExpression",
												"expression": "body.messageId"
											}
										}
									]
								}
							}
						}
					}
				}
			]
		},
		{
			"kind": "MapDefinition",
			"mapName": "RetrieveMessageStatus",
			"usecaseName": "RetrieveMessageStatus",
			"variableExpressionsDefinition": [
				{
					"kind": "MapExpressionsDefinition",
					"left": "messageId",
					"right": {
						"kind": "JSExpression",
						"expression": "input.messageId"
					}
				}
			],
			"stepsDefinition": [
				{
					"kind": "StepDefinition",
					"stepName": "",
					"condition": {
						"kind": "JSExpression",
						"expression": "true"
					},
					"variableExpressionsDefinition": [],
					"run": {
						"kind": "NetworkOperationDefinition",
						"definition": {
							"kind": "HTTPOperationDefinition",
							"method": "GET",
							"url": "https://api.tyntec.com/chat-api/v2/messages/{messageId}/history",
							"variableExpressionsDefinition": [],
							"requestDefinition": {
								"contentType": "application/json",
								"security": "other",
								"headers": [
									{
										"kind": "MapExpressionsDefinition",
										"left": "ApiKey",
										"right": {
											"kind": "JSExpression",
											"expression": "input.auth.apikey.key"
										}
									}
								],
								"body": [],
								"queryParametersDefinition": []
							},
							"responseDefinition": {
								"statusCode": 200,
								"contentType": "application/json",
								"contentLanguage": "en-US",
								"outcomeDefinition": {
									"kind": "OutcomeDefinition",
									"resultDefinition": [
										{
											"kind": "MapExpressionsDefinition",
											"left": "deliveryStatus",
											"right": {
												"kind": "JSExpression",
												"expression": "body.history[0].state"
											}
										}
									]
								}
							}
						}
					}
				}
			]
		}
	]
}